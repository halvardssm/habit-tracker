from datetime import datetime, timedelta

from db import habit_create, db
from habit import Habit


def seed():
    """Seeds data"""

    now = datetime.now()
    start_date = now - timedelta(days=30)
    start = datetime(start_date.year, start_date.month, start_date.day, 8, 15, 24)
    end = datetime(start.year, start.month + 2, start.day, 22, 0, 0)

    habit_create(
        Habit(
            name="Drink Water",
            description="Drink 1 glass of water",
            interval="PT4H",
            lifetime="PT5H",
            active=True,
            start=start,
            end=end,
        ),
        start_time=start,
    )

    habit_create(
        Habit(
            name="Exercise",
            description="Exercise for 30 minutes",
            interval="P7D",
            lifetime="P7D",
            active=True,
            start=start,
            end=end,
        ),
        start_time=start,
    )

    habit_create(
        Habit(
            name="Read",
            description="Read for 30 minutes",
            interval="P1D",
            lifetime="PT12H",
            active=True,
            start=start,
            end=end,
        ),
        start_time=start,
    )

    habit_create(
        Habit(
            name="Meditate",
            description="Meditate for 10 minutes",
            interval="PT5H",
            lifetime="PT5H",
            active=True,
            start=start,
            end=end,
        ),
        start_time=start,
    )

    habit_create(
        Habit(
            name="Sleep",
            description="Sleep for 8 hours",
            interval="P1D",
            lifetime="P1D",
            active=True,
            start=start,
            end=end,
        ),
        start_time=start,
    )

    tasks_complete = [
        1,
        2,
        3,
        4,
        7,
        8,
        13,
        15,
        18,
        21,
        25,
        26,
        28,
        31,
        34,
        35,
        36,
        39,
        43,
        44,
        45,
        46,
        49,
        50,
        55,
        57,
        60,
        63,
        67,
        68,
        70,
        73,
        76,
        77,
        78,
        82,
        85,
        86,
        87,
        88,
        91,
        92,
        97,
        99,
        102,
        105,
        109,
        110,
        112,
        115,
        118,
        119,
        120,
        127,
        128,
        129,
        130,
        133,
        134,
        139,
        141,
        144,
        147,
        151,
        152,
        154,
        157,
        160,
        161,
        162,
        165,
        169,
        170,
        171,
        172,
        175,
        176,
        181,
        183,
        186,
        189,
        371,
        372,
        373,
        375,
        380,
        382,
        386,
        388,
        389,
        390,
        394,
        395,
        398,
        399,
        400,
        403,
        404,
        405,
        406,
        407,
        408,
        443,
        447,
        453,
        458,
        462,
        467,
        471,
        476,
        482,
        485,
        491,
        496,
        498,
        499,
        500,
        501,
        503,
        504,
        505,
        509,
        512,
        518,
        519,
        528,
        533,
        534,
        536,
        542,
        543,
        550,
        553,
        556,
        560,
        561,
        572,
        576,
        738,
        739,
        740,
        742,
        743,
        744,
        745,
        746,
        747,
        748,
        749,
        751,
        753,
        755,
        757,
        758,
        759,
        762,
        763,
        764,
        765,
        767,
        768,
        769,
    ]

    query = """UPDATE tasks SET completed = 1 WHERE id in """
    query += "(" + ",".join(["?" for _ in tasks_complete]) + ")"

    db.execute(query, tuple(tasks_complete))


if __name__ == "__main__":
    seed()
